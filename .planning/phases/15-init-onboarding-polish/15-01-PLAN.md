---
phase: 15-init-onboarding-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/core/src/config/schema.ts
  - packages/cli/src/vault/providers.ts
  - packages/db/memory-files/BOOTSTRAP.md
  - packages/db/memory-files/presets/professional.md
  - packages/db/memory-files/presets/friendly.md
  - packages/db/memory-files/presets/technical.md
  - packages/db/memory-files/presets/opinionated.md
  - packages/db/memory-files/presets/custom.md
autonomous: true
requirements:
  - ONBOARD-TELEGRAM
  - ONBOARD-HATCH

must_haves:
  truths:
    - "AppConfigSchema accepts agentName and userDisplayName optional string fields"
    - "PROVIDERS array includes 'telegram' entry for keychain storage"
    - "BOOTSTRAP.md template exists in memory-files for deferred personality setup"
    - "Five personality preset templates exist in memory-files/presets/"
  artifacts:
    - path: "packages/core/src/config/schema.ts"
      provides: "Extended AppConfigSchema with agentName and userDisplayName"
      contains: "agentName"
    - path: "packages/cli/src/vault/providers.ts"
      provides: "PROVIDERS with telegram entry"
      contains: "telegram"
    - path: "packages/db/memory-files/BOOTSTRAP.md"
      provides: "First-run personality bootstrap instructions"
      contains: "Bootstrap"
    - path: "packages/db/memory-files/presets/professional.md"
      provides: "Professional personality preset template"
      contains: "Core Values"
  key_links:
    - from: "packages/core/src/config/schema.ts"
      to: "packages/cli/src/components/Onboarding.tsx"
      via: "AppConfig type used by onboarding result"
      pattern: "agentName.*optional"
---

<objective>
Extend the config schema and create foundation artifacts needed by the onboarding wizard changes in Plan 03.

Purpose: Plan 03 (Telegram + Hatch wizard steps) needs these schemas and templates to exist before it can wire them into the onboarding flow.
Output: Extended AppConfigSchema, "telegram" in PROVIDERS, BOOTSTRAP.md template, 5 personality preset markdown files.
</objective>

<execution_context>
@/Users/hitekmedia/.claude/get-shit-done/workflows/execute-plan.md
@/Users/hitekmedia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/core/src/config/schema.ts
@packages/cli/src/vault/providers.ts
@packages/db/memory-files/SOUL.md
@packages/db/src/memory/ensure-memory.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend config schema and PROVIDERS array</name>
  <files>
    packages/core/src/config/schema.ts
    packages/cli/src/vault/providers.ts
  </files>
  <action>
1. In packages/core/src/config/schema.ts, add two optional fields to AppConfigSchema:
   - `agentName: z.string().optional()` — the agent's chosen name (e.g. "Atlas"), default "tek"
   - `userDisplayName: z.string().optional()` — how the agent addresses the user

   Add them after the `modelAliases` field. No new types needed — AppConfig infers them automatically.

2. In packages/cli/src/vault/providers.ts, add "telegram" to the PROVIDERS tuple:
   ```typescript
   export const PROVIDERS = ["anthropic", "openai", "ollama", "venice", "google", "telegram"] as const;
   ```

   Add to PROVIDER_KEY_PREFIXES:
   ```typescript
   telegram: null,
   ```

   This lets the Telegram bot token be stored in the OS keychain using the existing vault addKey/getKey pattern, consistent with API provider keys.
  </action>
  <verify>
    Run `cd /Users/hitekmedia/Documents/GitHub/tek && npx tsc --noEmit -p packages/core/tsconfig.json` and `npx tsc --noEmit -p packages/cli/tsconfig.json` — both must pass with zero errors.
  </verify>
  <done>
    AppConfigSchema has agentName and userDisplayName optional fields. PROVIDERS includes "telegram" with null key prefix. TypeScript compiles cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create BOOTSTRAP.md and personality preset templates</name>
  <files>
    packages/db/memory-files/BOOTSTRAP.md
    packages/db/memory-files/presets/professional.md
    packages/db/memory-files/presets/friendly.md
    packages/db/memory-files/presets/technical.md
    packages/db/memory-files/presets/opinionated.md
    packages/db/memory-files/presets/custom.md
  </files>
  <action>
1. Create packages/db/memory-files/BOOTSTRAP.md — a first-run personality setup instruction file that gets copied to ~/.config/tek/memory/BOOTSTRAP.md when the user picks "Custom" or skips personality during init. The agent reads this on first chat and walks the user through conversational personality setup. Content:

```markdown
# Bootstrap: First-Run Personality Setup

You are starting your first conversation with a new user.
Your job is to get to know them and configure your personality.

## Steps

1. Introduce yourself and ask the user what they'd like to call you
2. Ask how the user prefers to be addressed
3. Ask about their primary use case (development, writing, research, general)
4. Ask about their communication style preference (concise vs detailed, formal vs casual)
5. Based on their answers, update SOUL.md with personalized values

## Important

- Be warm and conversational, not clinical
- Keep it to 4-5 questions max
- After setup, delete this BOOTSTRAP.md file
- Write the user's preferences to the SOUL.md Learned Preferences section
```

2. Create packages/db/memory-files/presets/ directory with 5 personality preset files. Each preset is a SOUL.md replacement that gets copied when the user selects a preset during Hatch. Each follows the same structure as existing SOUL.md but with preset-specific values:

   **professional.md** — Concise, formal, business-appropriate. Core values: precision, efficiency, professionalism. Communication style: formal, brief, structured. No humor unless initiated by user.

   **friendly.md** — Conversational, warm, asks follow-ups. Core values: warmth, engagement, curiosity. Communication style: casual, uses analogies, asks clarifying questions. Encourages exploration.

   **technical.md** — Detailed, code-heavy, precise. Core values: accuracy, depth, thoroughness. Communication style: technical precision, code examples first, references standards. Explains trade-offs.

   **opinionated.md** — Direct, has preferences, personality-forward. Core values: directness, strong opinions (loosely held), authenticity. Communication style: confident, recommends specific approaches, calls out anti-patterns.

   **custom.md** — Minimal template (same as current SOUL.md) to be refined via BOOTSTRAP.md conversation.

Each preset file must follow this structure:
```markdown
# Agent Identity

## Core Values
- [3-4 preset-specific values]

## Communication Style
- [3-4 preset-specific style notes]

## Learned Preferences
(Updated as the agent learns user preferences)

## Boundaries
- Never fabricate information when uncertain
- Always cite sources for factual claims
- Respect user privacy and security boundaries
```
  </action>
  <verify>
    Verify all 6 files exist: `ls packages/db/memory-files/BOOTSTRAP.md packages/db/memory-files/presets/`
  </verify>
  <done>
    BOOTSTRAP.md exists with conversational setup instructions. 5 preset files exist in presets/ directory, each with distinct personality values following SOUL.md structure.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit -p packages/core/tsconfig.json` passes
2. `npx tsc --noEmit -p packages/cli/tsconfig.json` passes
3. All template files exist at expected paths
4. PROVIDERS array has 6 entries including "telegram"
</verification>

<success_criteria>
- Config schema extended with personality fields
- Telegram added as a vault provider for keychain storage
- BOOTSTRAP.md and 5 preset templates ready for onboarding integration
</success_criteria>

<output>
After completion, create `.planning/phases/15-init-onboarding-polish/15-01-SUMMARY.md`
</output>
